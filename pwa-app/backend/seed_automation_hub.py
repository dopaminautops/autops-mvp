from models.database import SessionLocal, Workflow, AISuggestion, ActivityLog
from datetime import datetime, timedelta

def seed_automation_hub():
    """
        Add test data for Automation Hub
            """
                db = SessionLocal()
                    
                        print("üå± Seeding Automation Hub data...")
                            
                                # ============ AI SUGGESTIONS ============
                                    print("\nüìä Creating AI Suggestions...")
                                        
                                            suggestions = [
                                                    {
                                                                "title": "Automate client onboarding for consulting services",
                                                                            "description": "Automatically send welcome emails and setup calls when new clients sign up",
                                                                                        "icon": "üìß",
                                                                                                    "category": "client_onboarding",
                                                                                                                "priority": 5
                                                                                                                        },
                                                                                                                                {
                                                                                                                                            "title": "Set up automated payment reminders",
                                                                                                                                                        "description": "Send reminders 7 days before invoice due dates",
                                                                                                                                                                    "icon": "‚è∞",
                                                                                                                                                                                "category": "reminders",
                                                                                                                                                                                            "priority": 4
                                                                                                                                                                                                    },
                                                                                                                                                                                                            {
                                                                                                                                                                                                                        "title": "Create project milestone notifications",
                                                                                                                                                                                                                                    "description": "Alert team when project milestones are approaching",
                                                                                                                                                                                                                                                "icon": "üéØ",
                                                                                                                                                                                                                                                            "category": "automation",
                                                                                                                                                                                                                                                                        "priority": 3
                                                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                                                    ]
                                                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                                                            for s in suggestions:
                                                                                                                                                                                                                                                                                                    suggestion = AISuggestion(**s)
                                                                                                                                                                                                                                                                                                            db.add(suggestion)
                                                                                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                                                                                    db.commit()
                                                                                                                                                                                                                                                                                                                        print(f"‚úÖ Created {len(suggestions)} AI suggestions")
                                                                                                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                                                                                                # ============ WORKFLOWS ============
                                                                                                                                                                                                                                                                                                                                    print("\n‚öôÔ∏è Creating Workflows...")
                                                                                                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                                                                                                            workflows = [
                                                                                                                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                                                                                                                                "name": "Invoice Payment Reminder",
                                                                                                                                                                                                                                                                                                                                                                            "description": "Send email reminder for overdue invoices",
                                                                                                                                                                                                                                                                                                                                                                                        "trigger": "Invoice Overdue",
                                                                                                                                                                                                                                                                                                                                                                                                    "action": "Send Email",
                                                                                                                                                                                                                                                                                                                                                                                                                "icon": "üìß",
                                                                                                                                                                                                                                                                                                                                                                                                                            "is_active": True
                                                                                                                                                                                                                                                                                                                                                                                                                                    },
                                                                                                                                                                                                                                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                                                                                                                                                                                                                                        "name": "Client Onboarding",
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    "description": "Send welcome kit to new clients",
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                "trigger": "New Client",
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            "action": "Send Welcome Kit",
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        "icon": "üë§",
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    "is_active": True
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            },
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                "name": "Project Milestone Alert",
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            "description": "Notify team about project milestones",
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        "trigger": "Milestone Due",
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    "action": "Team Notification",
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                "icon": "üîî",
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            "is_active": False
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        ]
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                for w in workflows:
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        workflow = Workflow(**w)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                db.add(workflow)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        db.commit()
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            print(f"‚úÖ Created {len(workflows)} workflows")
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    # ============ ACTIVITY LOGS ============
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        print("\nüìã Creating Activity Logs...")
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                activities = [
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    "icon": "‚úÖ",
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                "title": "Invoice Reminder workflow triggered for Project X",
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            "description": "Sent payment reminder email to client",
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        "category": "workflow",
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    "created_at": datetime.utcnow() - timedelta(minutes=2)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            },
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                "icon": "‚öôÔ∏è",
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            "title": "Client Onboarding workflow modified",
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        "description": "Updated welcome email template",
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    "category": "workflow",
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                "created_at": datetime.utcnow() - timedelta(hours=1)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        },
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            "icon": "‚ö°",
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        "title": "New AI suggestion added for service automation",
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    "description": "Automate follow-up emails after consultations",
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                "category": "ai",
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            "created_at": datetime.utcnow() - timedelta(hours=2)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    },
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        "icon": "üìä",
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    "title": "Workflow performance report generated",
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                "description": "95% success rate across all workflows",
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            "category": "system",
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        "created_at": datetime.utcnow() - timedelta(hours=3)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                },
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    "icon": "‚úÖ",
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                "title": "Client Onboarding workflow executed",
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            "description": "Welcome kit sent to Sarah Johnson",
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        "category": "workflow",
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    "created_at": datetime.utcnow() - timedelta(hours=5)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ]
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        for a in activities:
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                activity = ActivityLog(**a)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        db.add(activity)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                db.commit()
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    print(f"‚úÖ Created {len(activities)} activity logs")
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            print("\nüéâ Automation Hub data seeded successfully!")
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                print("\nüìä Summary:")
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    print(f"   AI Suggestions: {len(suggestions)}")
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        print(f"   Workflows: {len(workflows)}")
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            print(f"   Activity Logs: {len(activities)}")
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    db.close()

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    if __name__ == "__main__":
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        seed_automation_hub()