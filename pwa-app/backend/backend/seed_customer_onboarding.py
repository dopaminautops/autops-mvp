from models.database import (
        SessionLocal, OnboardingFlow, OnboardingStep,
            PreServiceChecklist, ChecklistItem,
                IDConfiguration, LocationSettings
                )
                import json

                def seed_customer_onboarding():
                    """
                        Seed customer onboarding data
                            """
                                db = SessionLocal()
                                    
                                        print("üå± Seeding Customer Onboarding data...")
                                            
                                                # ============ ID CONFIGURATION ============
                                                    print("\nüÜî Creating ID Configuration...")
                                                        
                                                            id_config = IDConfiguration(
                                                                    ocr_engine="BlinkID",
                                                                            license_key_active=True,
                                                                                    field_mappings=json.dumps({
                                                                                                "full_name": "customer_name",
                                                                                                            "document_id": "gov_id_num",
                                                                                                                        "date_of_birth": "dob"
                                                                                                                                }),
                                                                                                                                        validation_rules=json.dumps({
                                                                                                                                                    "validate_expiry": False,
                                                                                                                                                                "require_photo_match": True,
                                                                                                                                                                            "update_arrival_status": True
                                                                                                                                                                                    }),
                                                                                                                                                                                            privacy_settings=json.dumps({
                                                                                                                                                                                                        "blur_sensitive_data": False,
                                                                                                                                                                                                                    "dont_store_images": True
                                                                                                                                                                                                                            })
                                                                                                                                                                                                                                )
                                                                                                                                                                                                                                    db.add(id_config)
                                                                                                                                                                                                                                        db.commit()
                                                                                                                                                                                                                                            print("‚úÖ ID Configuration created")
                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                    # ============ LOCATION SETTINGS ============
                                                                                                                                                                                                                                                        print("\nüìç Creating Location Settings...")
                                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                                location_settings = LocationSettings(
                                                                                                                                                                                                                                                                        google_map_link="https://maps.google.com/?q=Main+Office",
                                                                                                                                                                                                                                                                                use_dynamic_linking=False,
                                                                                                                                                                                                                                                                                        pre_arrival_trigger_enabled=True,
                                                                                                                                                                                                                                                                                                trigger_time_hours=1,
                                                                                                                                                                                                                                                                                                        helpdesk_phone="+1 (555) 000-0000",
                                                                                                                                                                                                                                                                                                                notification_template="Hi {Customer_Name}, our team is arriving shortly..."
                                                                                                                                                                                                                                                                                                                    )
                                                                                                                                                                                                                                                                                                                        db.add(location_settings)
                                                                                                                                                                                                                                                                                                                            db.commit()
                                                                                                                                                                                                                                                                                                                                print("‚úÖ Location Settings created")
                                                                                                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                                                                                                        # ============ PRE-SERVICE CHECKLIST ============
                                                                                                                                                                                                                                                                                                                                            print("\nüìã Creating Pre-Service Checklist...")
                                                                                                                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                                                                                                                    checklist = PreServiceChecklist(
                                                                                                                                                                                                                                                                                                                                                            name="WhatsApp Pre-Service Prep List",
                                                                                                                                                                                                                                                                                                                                                                    trigger_hours_before=24,
                                                                                                                                                                                                                                                                                                                                                                            intro_message="Hi {{Customer_Name}}, just a quick reminder about your appointment tomorrow. Please review this checklist:",
                                                                                                                                                                                                                                                                                                                                                                                    require_confirmation=True,
                                                                                                                                                                                                                                                                                                                                                                                            remind_if_unread=False
                                                                                                                                                                                                                                                                                                                                                                                                )
                                                                                                                                                                                                                                                                                                                                                                                                    db.add(checklist)
                                                                                                                                                                                                                                                                                                                                                                                                        db.commit()
                                                                                                                                                                                                                                                                                                                                                                                                            db.refresh(checklist)
                                                                                                                                                                                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                                                                                                                                                                                    # Add checklist items
                                                                                                                                                                                                                                                                                                                                                                                                                        items = [
                                                                                                                                                                                                                                                                                                                                                                                                                                "Clear the driveway",
                                                                                                                                                                                                                                                                                                                                                                                                                                        "Secure pets in a separate room",
                                                                                                                                                                                                                                                                                                                                                                                                                                                "Unlock the side gate"
                                                                                                                                                                                                                                                                                                                                                                                                                                                    ]
                                                                                                                                                                                                                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                                                                                                                                                                                                                            for idx, item_text in enumerate(items, 1):
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    item = ChecklistItem(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                checklist_id=checklist.id,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            text=item_text,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        order=idx
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                )
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        db.add(item)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                db.commit()
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    print(f"‚úÖ Checklist created with {len(items)} items")
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            # ============ ONBOARDING FLOW ============
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                print("\nüîÑ Creating Onboarding Flow...")
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        flow = OnboardingFlow(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                name="Post-Booking Onboarding",
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        trigger_type="post-booking",
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                is_active=True
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    )
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        db.add(flow)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            db.commit()
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                db.refresh(flow)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        # Add flow steps
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            steps = [
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                "step_type": "whatsapp_checklist",
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            "order": 1,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        "config": {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        "checklist_id": checklist.id,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        "template_name": "Welcome Pack v2",
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        "immediate_action": True
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    },
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                "is_enabled": True
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        },
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            "step_type": "location_link",
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        "order": 2,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    "config": {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    "timing": "1h_before",
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    "enable_route_preview": True,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    "google_maps_integration": True
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                },
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            "is_enabled": True
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    },
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        "step_type": "helpdesk_info",
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    "order": 3,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                "config": {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                "include_in_footer": True,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                "phone_number": "+1 (555) 000-0000"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            },
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        "is_enabled": True
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                },
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    "step_type": "id_scan",
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                "order": 4,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            "config": {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            "trigger_on_arrival": True,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            "required": False
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        },
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    "is_enabled": False
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ]
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        for step_data in steps:
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                step = OnboardingStep(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            flow_id=flow.id,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        step_type=step_data["step_type"],
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    order=step_data["order"],
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                config=json.dumps(step_data["config"]),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            is_enabled=step_data["is_enabled"]
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    )
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            db.add(step)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    db.commit()
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        print(f"‚úÖ Onboarding flow created with {len(steps)} steps")
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                print("\nüéâ Customer Onboarding data seeded successfully!")
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    print("\nüìä Summary:")
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        print(f"   ID Configuration: 1")
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            print(f"   Location Settings: 1")
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                print(f"   Checklists: 1")
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    print(f"   Checklist Items: {len(items)}")
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        print(f"   Onboarding Flows: 1")
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            print(f"   Flow Steps: {len(steps)}")
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    db.close()

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    if __name__ == "__main__":
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        seed_customer_onboarding()
)